{"ast":null,"code":"'use strict';\n\nvar wrap = require('./wrap.js');\n\nmodule.exports = trough;\ntrough.wrap = wrap;\nvar slice = [].slice; // Create new middleware.\n\nfunction trough() {\n  var fns = [];\n  var middleware = {};\n  middleware.run = run;\n  middleware.use = use;\n  return middleware; // Run `fns`.  Last argument must be a completion handler.\n\n  function run() {\n    var index = -1;\n    var input = slice.call(arguments, 0, -1);\n    var done = arguments[arguments.length - 1];\n\n    if (typeof done !== 'function') {\n      throw new Error('Expected function as last argument, not ' + done);\n    }\n\n    next.apply(null, [null].concat(input)); // Run the next `fn`, if any.\n\n    function next(err) {\n      var fn = fns[++index];\n      var params = slice.call(arguments, 0);\n      var values = params.slice(1);\n      var length = input.length;\n      var pos = -1;\n\n      if (err) {\n        done(err);\n        return;\n      } // Copy non-nully input into values.\n\n\n      while (++pos < length) {\n        if (values[pos] === null || values[pos] === undefined) {\n          values[pos] = input[pos];\n        }\n      }\n\n      input = values; // Next or done.\n\n      if (fn) {\n        wrap(fn, next).apply(null, input);\n      } else {\n        done.apply(null, [null].concat(input));\n      }\n    }\n  } // Add `fn` to the list.\n\n\n  function use(fn) {\n    if (typeof fn !== 'function') {\n      throw new Error('Expected `fn` to be a function, not ' + fn);\n    }\n\n    fns.push(fn);\n    return middleware;\n  }\n}","map":{"version":3,"names":["wrap","require","module","exports","trough","slice","fns","middleware","run","use","index","input","call","arguments","done","length","Error","next","apply","concat","err","fn","params","values","pos","undefined","push"],"sources":["/Users/zhangruikai/Desktop/rudyzhang123.github.io/node_modules/trough/index.js"],"sourcesContent":["'use strict'\n\nvar wrap = require('./wrap.js')\n\nmodule.exports = trough\n\ntrough.wrap = wrap\n\nvar slice = [].slice\n\n// Create new middleware.\nfunction trough() {\n  var fns = []\n  var middleware = {}\n\n  middleware.run = run\n  middleware.use = use\n\n  return middleware\n\n  // Run `fns`.  Last argument must be a completion handler.\n  function run() {\n    var index = -1\n    var input = slice.call(arguments, 0, -1)\n    var done = arguments[arguments.length - 1]\n\n    if (typeof done !== 'function') {\n      throw new Error('Expected function as last argument, not ' + done)\n    }\n\n    next.apply(null, [null].concat(input))\n\n    // Run the next `fn`, if any.\n    function next(err) {\n      var fn = fns[++index]\n      var params = slice.call(arguments, 0)\n      var values = params.slice(1)\n      var length = input.length\n      var pos = -1\n\n      if (err) {\n        done(err)\n        return\n      }\n\n      // Copy non-nully input into values.\n      while (++pos < length) {\n        if (values[pos] === null || values[pos] === undefined) {\n          values[pos] = input[pos]\n        }\n      }\n\n      input = values\n\n      // Next or done.\n      if (fn) {\n        wrap(fn, next).apply(null, input)\n      } else {\n        done.apply(null, [null].concat(input))\n      }\n    }\n  }\n\n  // Add `fn` to the list.\n  function use(fn) {\n    if (typeof fn !== 'function') {\n      throw new Error('Expected `fn` to be a function, not ' + fn)\n    }\n\n    fns.push(fn)\n\n    return middleware\n  }\n}\n"],"mappings":"AAAA;;AAEA,IAAIA,IAAI,GAAGC,OAAO,CAAC,WAAD,CAAlB;;AAEAC,MAAM,CAACC,OAAP,GAAiBC,MAAjB;AAEAA,MAAM,CAACJ,IAAP,GAAcA,IAAd;AAEA,IAAIK,KAAK,GAAG,GAAGA,KAAf,C,CAEA;;AACA,SAASD,MAAT,GAAkB;EAChB,IAAIE,GAAG,GAAG,EAAV;EACA,IAAIC,UAAU,GAAG,EAAjB;EAEAA,UAAU,CAACC,GAAX,GAAiBA,GAAjB;EACAD,UAAU,CAACE,GAAX,GAAiBA,GAAjB;EAEA,OAAOF,UAAP,CAPgB,CAShB;;EACA,SAASC,GAAT,GAAe;IACb,IAAIE,KAAK,GAAG,CAAC,CAAb;IACA,IAAIC,KAAK,GAAGN,KAAK,CAACO,IAAN,CAAWC,SAAX,EAAsB,CAAtB,EAAyB,CAAC,CAA1B,CAAZ;IACA,IAAIC,IAAI,GAAGD,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAApB;;IAEA,IAAI,OAAOD,IAAP,KAAgB,UAApB,EAAgC;MAC9B,MAAM,IAAIE,KAAJ,CAAU,6CAA6CF,IAAvD,CAAN;IACD;;IAEDG,IAAI,CAACC,KAAL,CAAW,IAAX,EAAiB,CAAC,IAAD,EAAOC,MAAP,CAAcR,KAAd,CAAjB,EATa,CAWb;;IACA,SAASM,IAAT,CAAcG,GAAd,EAAmB;MACjB,IAAIC,EAAE,GAAGf,GAAG,CAAC,EAAEI,KAAH,CAAZ;MACA,IAAIY,MAAM,GAAGjB,KAAK,CAACO,IAAN,CAAWC,SAAX,EAAsB,CAAtB,CAAb;MACA,IAAIU,MAAM,GAAGD,MAAM,CAACjB,KAAP,CAAa,CAAb,CAAb;MACA,IAAIU,MAAM,GAAGJ,KAAK,CAACI,MAAnB;MACA,IAAIS,GAAG,GAAG,CAAC,CAAX;;MAEA,IAAIJ,GAAJ,EAAS;QACPN,IAAI,CAACM,GAAD,CAAJ;QACA;MACD,CAVgB,CAYjB;;;MACA,OAAO,EAAEI,GAAF,GAAQT,MAAf,EAAuB;QACrB,IAAIQ,MAAM,CAACC,GAAD,CAAN,KAAgB,IAAhB,IAAwBD,MAAM,CAACC,GAAD,CAAN,KAAgBC,SAA5C,EAAuD;UACrDF,MAAM,CAACC,GAAD,CAAN,GAAcb,KAAK,CAACa,GAAD,CAAnB;QACD;MACF;;MAEDb,KAAK,GAAGY,MAAR,CAnBiB,CAqBjB;;MACA,IAAIF,EAAJ,EAAQ;QACNrB,IAAI,CAACqB,EAAD,EAAKJ,IAAL,CAAJ,CAAeC,KAAf,CAAqB,IAArB,EAA2BP,KAA3B;MACD,CAFD,MAEO;QACLG,IAAI,CAACI,KAAL,CAAW,IAAX,EAAiB,CAAC,IAAD,EAAOC,MAAP,CAAcR,KAAd,CAAjB;MACD;IACF;EACF,CAlDe,CAoDhB;;;EACA,SAASF,GAAT,CAAaY,EAAb,EAAiB;IACf,IAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8B;MAC5B,MAAM,IAAIL,KAAJ,CAAU,yCAAyCK,EAAnD,CAAN;IACD;;IAEDf,GAAG,CAACoB,IAAJ,CAASL,EAAT;IAEA,OAAOd,UAAP;EACD;AACF"},"metadata":{},"sourceType":"script"}