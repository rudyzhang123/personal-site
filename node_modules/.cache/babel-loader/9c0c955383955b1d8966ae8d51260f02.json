{"ast":null,"code":"'use strict';\n\nvar slice = [].slice;\nmodule.exports = wrap; // Wrap `fn`.\n// Can be sync or async; return a promise, receive a completion handler, return\n// new values and errors.\n\nfunction wrap(fn, callback) {\n  var invoked;\n  return wrapped;\n\n  function wrapped() {\n    var params = slice.call(arguments, 0);\n    var callback = fn.length > params.length;\n    var result;\n\n    if (callback) {\n      params.push(done);\n    }\n\n    try {\n      result = fn.apply(null, params);\n    } catch (error) {\n      // Well, this is quite the pickle.\n      // `fn` received a callback and invoked it (thus continuing the pipeline),\n      // but later also threw an error.\n      // We’re not about to restart the pipeline again, so the only thing left\n      // to do is to throw the thing instead.\n      if (callback && invoked) {\n        throw error;\n      }\n\n      return done(error);\n    }\n\n    if (!callback) {\n      if (result && typeof result.then === 'function') {\n        result.then(then, done);\n      } else if (result instanceof Error) {\n        done(result);\n      } else {\n        then(result);\n      }\n    }\n  } // Invoke `next`, only once.\n\n\n  function done() {\n    if (!invoked) {\n      invoked = true;\n      callback.apply(null, arguments);\n    }\n  } // Invoke `done` with one value.\n  // Tracks if an error is passed, too.\n\n\n  function then(value) {\n    done(null, value);\n  }\n}","map":{"version":3,"names":["slice","module","exports","wrap","fn","callback","invoked","wrapped","params","call","arguments","length","result","push","done","apply","error","then","Error","value"],"sources":["/Users/zhangruikai/Desktop/rudyzhang123.github.io/node_modules/trough/wrap.js"],"sourcesContent":["'use strict'\n\nvar slice = [].slice\n\nmodule.exports = wrap\n\n// Wrap `fn`.\n// Can be sync or async; return a promise, receive a completion handler, return\n// new values and errors.\nfunction wrap(fn, callback) {\n  var invoked\n\n  return wrapped\n\n  function wrapped() {\n    var params = slice.call(arguments, 0)\n    var callback = fn.length > params.length\n    var result\n\n    if (callback) {\n      params.push(done)\n    }\n\n    try {\n      result = fn.apply(null, params)\n    } catch (error) {\n      // Well, this is quite the pickle.\n      // `fn` received a callback and invoked it (thus continuing the pipeline),\n      // but later also threw an error.\n      // We’re not about to restart the pipeline again, so the only thing left\n      // to do is to throw the thing instead.\n      if (callback && invoked) {\n        throw error\n      }\n\n      return done(error)\n    }\n\n    if (!callback) {\n      if (result && typeof result.then === 'function') {\n        result.then(then, done)\n      } else if (result instanceof Error) {\n        done(result)\n      } else {\n        then(result)\n      }\n    }\n  }\n\n  // Invoke `next`, only once.\n  function done() {\n    if (!invoked) {\n      invoked = true\n\n      callback.apply(null, arguments)\n    }\n  }\n\n  // Invoke `done` with one value.\n  // Tracks if an error is passed, too.\n  function then(value) {\n    done(null, value)\n  }\n}\n"],"mappings":"AAAA;;AAEA,IAAIA,KAAK,GAAG,GAAGA,KAAf;AAEAC,MAAM,CAACC,OAAP,GAAiBC,IAAjB,C,CAEA;AACA;AACA;;AACA,SAASA,IAAT,CAAcC,EAAd,EAAkBC,QAAlB,EAA4B;EAC1B,IAAIC,OAAJ;EAEA,OAAOC,OAAP;;EAEA,SAASA,OAAT,GAAmB;IACjB,IAAIC,MAAM,GAAGR,KAAK,CAACS,IAAN,CAAWC,SAAX,EAAsB,CAAtB,CAAb;IACA,IAAIL,QAAQ,GAAGD,EAAE,CAACO,MAAH,GAAYH,MAAM,CAACG,MAAlC;IACA,IAAIC,MAAJ;;IAEA,IAAIP,QAAJ,EAAc;MACZG,MAAM,CAACK,IAAP,CAAYC,IAAZ;IACD;;IAED,IAAI;MACFF,MAAM,GAAGR,EAAE,CAACW,KAAH,CAAS,IAAT,EAAeP,MAAf,CAAT;IACD,CAFD,CAEE,OAAOQ,KAAP,EAAc;MACd;MACA;MACA;MACA;MACA;MACA,IAAIX,QAAQ,IAAIC,OAAhB,EAAyB;QACvB,MAAMU,KAAN;MACD;;MAED,OAAOF,IAAI,CAACE,KAAD,CAAX;IACD;;IAED,IAAI,CAACX,QAAL,EAAe;MACb,IAAIO,MAAM,IAAI,OAAOA,MAAM,CAACK,IAAd,KAAuB,UAArC,EAAiD;QAC/CL,MAAM,CAACK,IAAP,CAAYA,IAAZ,EAAkBH,IAAlB;MACD,CAFD,MAEO,IAAIF,MAAM,YAAYM,KAAtB,EAA6B;QAClCJ,IAAI,CAACF,MAAD,CAAJ;MACD,CAFM,MAEA;QACLK,IAAI,CAACL,MAAD,CAAJ;MACD;IACF;EACF,CAtCyB,CAwC1B;;;EACA,SAASE,IAAT,GAAgB;IACd,IAAI,CAACR,OAAL,EAAc;MACZA,OAAO,GAAG,IAAV;MAEAD,QAAQ,CAACU,KAAT,CAAe,IAAf,EAAqBL,SAArB;IACD;EACF,CA/CyB,CAiD1B;EACA;;;EACA,SAASO,IAAT,CAAcE,KAAd,EAAqB;IACnBL,IAAI,CAAC,IAAD,EAAOK,KAAP,CAAJ;EACD;AACF"},"metadata":{},"sourceType":"script"}